package main

import (
	"bytes"
	"encoding/json"
	"fmt"
	"net/http"
)

func InitSampleData() {

	input := []string{
		"7067950839",
		"7067950859",
		"7067950893",
		"7067950924",
		"7067950959",
		"7067950978",
		"7067950979",
		"7067950983",
		"7067951016",
		"7067951020",
		"7067951037",
		"7067951044",
		"7067951081",
		"7067951098",
		"7067951103",
		"7067951151",
		"7067951177",
		"7067951232",
		"7067951279",
		"7067951292",
		"7067951293",
		"7067951366",
		"7067951379",
		"7067951380",
		"7067951393",
		"7067951397",
		"7067951400",
		"7067951421",
		"7067951424",
		"7067951464",
		"7067951511",
		"7067951517",
		"7067951539",
		"7067951563",
		"7067951572",
		"7067951590",
		"7067951604",
		"7067951608",
		"7067951609",
		"7067951613",
		"7067951691",
		"7067951717",
		"7067951741",
		"7067951744",
		"7067951748",
		"7067951756",
		"7067951776",
		"7067951796",
		"7067951817",
		"7067951819",
		"7067951829",
		"7067951831",
		"7067951843",
		"7067951846",
		"7067951864",
		"7067951871",
		"7067951879",
		"7067951900",
		"7067951906",
		"7067951909",
		"7067951912",
		"7067951940",
		"7067951969",
		"7067952006",
		"7067952018",
		"7067952030",
		"7067952051",
		"7067952071",
		"7067952075",
		"7067952078",
		"7067952106",
		"7067952129",
		"7067952154",
		"7067952156",
		"7067952160",
		"7067952173",
		"7067952179",
		"7067952237",
		"7067952270",
		"7067952311",
		"7067952340",
		"7067952342",
		"7067952348",
		"7067952356",
		"7067952361",
		"7067952362",
		"7067952368",
		"7067952369",
		"7067952370",
		"7067952418",
		"7067952424",
		"7067952505",
		"7067952526",
		"7067952535",
		"7067952548",
		"7067952549",
		"7067952562",
		"7067952566",
		"7067952580",
	}

	obj := map[string]string{
		"obj":    "Preferences",
		"msisdn": "8169226823",
		"svcprv": "JI",
		"reqno":  "12031575743690715",
		"rmode":  "5",
		"ctgr":   "1,2,3",
		"cmode":  "11,12,13",
		"day":    "32,33",
		"time":   "21,23",
		"lrn":    "3086",
		"cts":    "1575723323",
		"uts":    "1575743691",
		"crtr":   "jio.com",
		"uby":    "jio.com",
		"crmno":  "SR123321",
		"sts":    "A",
		"srvac":  "2",
		"ptype":  "1",
	}

	for i := range input {
		obj["msisdn"] = input[i]
		fmt.Println(obj)

		client := &http.Client{}

		link := "http://127.0.0.1:5984/test/" + input[i]
		j, err := json.Marshal(obj)
		req, err := http.NewRequest(http.MethodPut, link, bytes.NewBuffer(j))
		if err != nil {
			panic(err)
		}

		req.Header.Set("Content-Type", "application/json;charset=utf-8")
		resp, err := client.Do(req)
		if err != nil {
			panic(err)
		}
		fmt.Println(resp.StatusCode)
	}
}

func main() {
	InitSampleData()
}
